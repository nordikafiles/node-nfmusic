// Generated by IcedCoffeeScript 1.8.0-d
(function() {
  var ChromeExtension;

  ChromeExtension = (function() {
    function ChromeExtension() {}

    ChromeExtension.send = function(name, value) {
      var ev;
      ev = new CustomEvent(name, {
        detail: {
          type: "FROM_PAGE",
          value: value
        }
      });
      return document.querySelector("#port").dispatchEvent(ev);
    };

    ChromeExtension.on = function(eventName, callback) {
      return document.querySelector("#port").addEventListener(eventName, function(e) {
        if (e.type === "FROM_EXTENSION") {
          return callback(e.value);
        }
      });
    };

    ChromeExtension.off = function(eventName) {
      return document.querySelector("#port").removeEventListener(eventName);
    };

    ChromeExtension.openMedia = function(url, callback) {
      ChromeExtension.send("openMedia", url);
      return ChromeExtension.on("openMedia_res", function(data) {
        ChromeExtension.off("openMedia_res");
        return callback(data);
      });
    };

    return ChromeExtension;

  })();

}).call(this);
